<div class="docs-container" [class.dark-theme]="currentTheme === 'dark'">
  @if (mobileMenuOpen) {
    <div class="mobile-menu-overlay" (click)="closeMobileMenu()" (keydown.enter)="closeMobileMenu()" (keydown.escape)="closeMobileMenu()" tabindex="0" role="button" [attr.aria-label]="'Close menu'"></div>
  }

  <!-- API Documentation Header -->
  <header class="api-docs-header">
    <div class="header-container">
      <div class="header-left">
        <button class="mobile-menu-toggle" (click)="toggleMobileMenu()" [attr.aria-label]="mobileMenuOpen ? 'Close menu' : 'Open menu'">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
        <a href="#getting-started" (click)="scrollToSection($event, 'getting-started')" class="header-logo">
          <span class="logo-text">ngxsmk-datepicker</span>
          <span class="logo-version">v1.9.0</span>
        </a>
      </div>
      <div class="header-center">
        <div class="global-search">
          <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input 
            type="text" 
            class="search-input" 
            placeholder="Search documentation..." 
            [(ngModel)]="searchQuery"
            (input)="onSearchChange($any($event.target).value || '')"
            (keydown.escape)="clearSearch()"
            aria-label="Search documentation">
          @if (searchQuery) {
            <button class="search-clear" (click)="clearSearch()" aria-label="Clear search">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          }
        </div>
      </div>
      <div class="header-right">
        <button class="header-theme-toggle" (click)="toggleTheme()" [attr.aria-label]="currentTheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'">
          {{ currentTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô' }}
        </button>
      </div>
    </div>
  </header>

  <aside class="docs-sidebar" [class.mobile-open]="mobileMenuOpen">
    <div class="sidebar-header">
      <h1 class="sidebar-title">Documentation</h1>
    </div>
    <nav class="sidebar-nav">
      @if (searchQuery && filteredNavigationItems.length === 0) {
        <div class="search-no-results">
          <p>No results found for "{{ searchQuery }}"</p>
        </div>
      } @else {
        @for (navItem of filteredNavigationItems; track navItem.id) {
          <a 
            [href]="'#' + navItem.id" 
            (click)="scrollToSection($event, navItem.id); closeMobileMenu()" 
            [class]="'nav-link' + (navItem.sub ? ' nav-link-sub' : '')">
            {{ navItem.label }}
          </a>
        }
      }
    </nav>
  </aside>

  <main class="docs-content">
    <section id="getting-started" class="hero-section">
      <div class="hero-content">
        <h1 class="hero-title">ngxsmk-datepicker</h1>
        <p class="hero-tagline">Forge your dates. Shape your UI.</p>
        <p class="hero-version">(v1.9.0)</p>
        <p class="hero-description">A lightweight, customizable, and easy-to-use datepicker and date range picker for Angular 17+ applications. Features GPU-accelerated animations, comprehensive theming with CSS variables, extension points & hooks, Signal Forms support, full SSR compatibility, and enhanced keyboard navigation.</p>
        <div class="hero-buttons">
          <a href="#installation" (click)="scrollToSection($event, 'installation')" class="hero-button primary">Get Started</a>
          <a href="https://github.com/NGXSMK/ngxsmk-datepicker" target="_blank" class="hero-button secondary">View on GitHub</a>
        </div>
      </div>
      
      <div class="feature-grid">
        @for (feature of features; track feature.title) {
          <div class="feature-card">
            <div class="feature-icon">{{ feature.icon }}</div>
            <h3>{{ feature.title }}</h3>
            <p>{{ feature.description }}</p>
          </div>
        }
      </div>
    </section>

    <section id="theming" class="docs-section">
      <h2 class="section-title">Theming</h2>
      <p>The datepicker supports comprehensive theming through CSS custom properties (CSS variables) and the <code>[theme]</code> input. All styling can be customized to match your application's design system.</p>

      <h3 class="subsection-title">Built-in Light/Dark Themes</h3>
      <p>Use the <code>[theme]</code> input to switch between light and dark modes. The datepicker automatically applies the appropriate theme styles.</p>

      <div class="example-demo">
        <div class="theme-demo">
          <ngxsmk-datepicker
            mode="single"
            [theme]="currentTheme"
            placeholder="Select a date">
          </ngxsmk-datepicker>
          <button class="theme-toggle-btn" (click)="toggleTheme()">
            Switch to {{ currentTheme === 'dark' ? 'Light' : 'Dark' }} Mode
          </button>
        </div>
      </div>

      <h3 class="subsection-title">CSS Variables Customization</h3>
      <p>Set CSS variables on a parent scope to control colors, spacing, shadows, typography, border radius, and transitions. The datepicker provides 28+ CSS custom properties for complete customization. See the <a href="https://github.com/NGXSMK/ngxsmk-datepicker/blob/main/projects/ngxsmk-datepicker/docs/API.md#133-complete-css-variables-reference" target="_blank">complete CSS variables reference</a> in the API documentation.</p>

      <div class="example-demo">
        <div style="--datepicker-primary-color:#3b82f6; --datepicker-primary-contrast:#ffffff; --datepicker-range-background:#dbeafe; --datepicker-radius-md:10px;">
          <ngxsmk-datepicker
            mode="single"
            [theme]="currentTheme"
            placeholder="Custom blue theme">
          </ngxsmk-datepicker>
        </div>
      </div>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">css</span>
          <button class="code-copy" (click)="copyCode(themingCssCode)">Copy</button>
        </div>
        <pre><code [innerHTML]="themingCssCode | code"></code></pre>
      </div>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">html</span>
          <button class="code-copy" (click)="copyCode(themingCssVarsCode)">Copy</button>
        </div>
        <pre><code [innerHTML]="themingCssVarsCode | code"></code></pre>
      </div>

      <h3 class="subsection-title">Classes / Tailwind</h3>
      <p>Use the <code>[classes]</code> input to attach utility classes to inner elements.</p>

      <div class="example-demo">
        <ngxsmk-datepicker
          mode="single"
          [theme]="currentTheme"
          [classes]="datepickerClasses">
        </ngxsmk-datepicker>
      </div>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">html</span>
          <button class="code-copy" (click)="copyCode(themingClassesCode)">Copy</button>
        </div>
        <pre><code [innerHTML]="themingClassesCode | code"></code></pre>
      </div>

      <h3 class="subsection-title">Design System Integration</h3>
      <p>Integrate with design token systems like TokiForge, Tailwind CSS, or Material Design by mapping CSS variables to your design tokens.</p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">css</span>
          <button class="code-copy" (click)="copyCode(designSystemCode)">Copy</button>
        </div>
        <pre><code [innerHTML]="designSystemCode | code"></code></pre>
      </div>

      <p>For complete theming documentation, see the <a href="https://github.com/NGXSMK/ngxsmk-datepicker/blob/main/projects/ngxsmk-datepicker/docs/API.md#13-theming-and-customization" target="_blank">Theming section</a> in the API documentation.</p>
    </section>

    <section id="installation" class="docs-section">
      <h2 class="section-title">Installation</h2>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">bash</span>
          <button class="code-copy" (click)="copyCode('npm install ngxsmk-datepicker')">Copy</button>
        </div>
        <pre><code>npm install ngxsmk-datepicker</code></pre>
      </div>
    </section>

    <section id="basic-usage" class="docs-section">
      <h2 class="section-title">Basic Usage</h2>
      <p>Import the component in your Angular module or standalone component:</p>
      
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">typescript</span>
          <button class="code-copy" (click)="copyCode(basicUsageCode)">Copy</button>
        </div>
        <pre><code [innerHTML]="basicUsageCode | code"></code></pre>
      </div>

      <p>Use in your template:</p>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">html</span>
          <button class="code-copy" (click)="copyCode(basicTemplateCode)">Copy</button>
        </div>
        <pre><code [innerHTML]="basicTemplateCode | code"></code></pre>
      </div>
    </section>

    <section id="api-reference" class="docs-section">
      <h2 class="section-title">API Reference</h2>
      
      <div id="inputs" class="api-subsection">
        <h3 class="subsection-title">Inputs</h3>
        <div class="api-table">
          <table>
            <thead>
              <tr>
                <th>Property</th>
                <th>Type</th>
                <th>Default</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              @for (input of inputProperties; track input.property) {
                <tr>
                  <td><code>{{ input.property }}</code></td>
                  <td><code>{{ input.type }}</code></td>
                  <td><code>{{ input.default }}</code></td>
                  <td>{{ input.description }}</td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>

      <div id="outputs" class="api-subsection">
        <h3 class="subsection-title">Outputs</h3>
        <div class="api-table">
          <table>
            <thead>
              <tr>
                <th>Event</th>
                <th>Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              @for (output of outputProperties; track output.event) {
                <tr>
                  <td><code>{{ output.event }}</code></td>
                  <td><code>{{ output.type }}</code></td>
                  <td>{{ output.description }}</td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="examples" class="docs-section">
      <h2 class="section-title">Examples</h2>
      <form [formGroup]="datepickerForm">

      <div id="signal-forms" class="example-section">
        <h3 class="example-title">Signal Forms (Angular 21)</h3>
        <p>Bind directly to a writable signal using two-way binding.</p>

        <div class="example-demo">
          <ngxsmk-datepicker
            mode="single"
            [theme]="currentTheme"
            placeholder="Select a date (signals)"
            [value]="signalDate()"
            (valueChange)="signalDate.set($event)">
          </ngxsmk-datepicker>
        </div>

        <div class="result-box">
          <strong>Signal Value:</strong>
          <code>{{ signalDate() | json }}</code>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">typescript</span>
            <button class="code-copy" (click)="copyCode(signalFormsTsCode)">Copy</button>
          </div>
          <pre><code [innerHTML]="signalFormsTsCode | code"></code></pre>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">html</span>
            <button class="code-copy" (click)="copyCode(signalFormsHtmlCode)">Copy</button>
          </div>
          <pre><code [innerHTML]="signalFormsHtmlCode | code"></code></pre>
        </div>
      </div>

      <div id="single-date" class="example-section">
        <h3 class="example-title">Single Date Selection</h3>
        <p>Basic single date picker with form control integration.</p>
        
        <div class="example-demo">
          <ngxsmk-datepicker
            mode="single"
            [theme]="currentTheme"
            placeholder="Select a date"
            formControlName="singleDate">
          </ngxsmk-datepicker>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">html</span>
            <button class="code-copy" (click)="copyCode(singleDateCode)">Copy</button>
          </div>
          <pre><code [innerHTML]="singleDateCode | code"></code></pre>
        </div>

        @if (datepickerForm.controls.singleDate.value) {
          <div class="result-box">
            <strong>Form Value:</strong> <code>{{ JSON.stringify(datepickerForm.controls.singleDate.value) }}</code>
          </div>
        }
      </div>

      <div id="customization-a11y" class="example-section">
        <h3 class="example-title">Customization & A11y</h3>
        <p>Demonstrates week start, year range, custom labels, aria labels, and styling via classes.</p>

        <div class="example-demo">
          <ngxsmk-datepicker
            mode="single"
            [theme]="currentTheme"
            [weekStart]="weekStartDemo"
            [yearRange]="yearRangeDemo"
            [clearLabel]="clearLabelDemo"
            [closeLabel]="closeLabelDemo"
            [prevMonthAriaLabel]="prevLabelDemo"
            [nextMonthAriaLabel]="nextLabelDemo"
            [classes]="datepickerClasses">
          </ngxsmk-datepicker>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">html</span>
            <button class="code-copy" (click)="copyCode(customizationCode)">Copy</button>
          </div>
          <pre><code [innerHTML]="customizationCode | code"></code></pre>
        </div>
      </div>

      <div id="date-range" class="example-section">
        <h3 class="example-title">Date Range Selection</h3>
        <p>Select a date range with optional time selection.</p>
        
        <div class="example-demo">
          <ngxsmk-datepicker
            mode="range"
            [showTime]="true"
            [minuteInterval]="15"
            [ranges]="myRanges"
            [theme]="currentTheme"
            formControlName="rangeWithTime">
          </ngxsmk-datepicker>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">html</span>
            <button class="code-copy" (click)="copyCode(rangeDateCode)">Copy</button>
          </div>
          <pre><code [innerHTML]="rangeDateCode | code"></code></pre>
        </div>

        @if (datepickerForm.controls.rangeWithTime.value) {
          <div class="result-box">
            <strong>Form Value:</strong> <code>{{ JSON.stringify(datepickerForm.controls.rangeWithTime.value) }}</code>
          </div>
        }
      </div>

      <div id="multiple-dates" class="example-section">
        <h3 class="example-title">Multiple Date Selection</h3>
        <p>Select multiple non-contiguous dates.</p>
        
        <div class="example-demo">
          <ngxsmk-datepicker
            mode="multiple"
            [theme]="currentTheme"
            (action)="handleDatepickerAction($event)"
            formControlName="multipleDates">
          </ngxsmk-datepicker>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">html</span>
            <button class="code-copy" (click)="copyCode(multipleDatesCode)">Copy</button>
          </div>
          <pre><code [innerHTML]="multipleDatesCode | code"></code></pre>
        </div>

        @if (datepickerForm.controls.multipleDates.value) {
          <div class="result-box">
            <strong>Form Value:</strong> <code>{{ JSON.stringify(datepickerForm.controls.multipleDates.value) }}</code>
          </div>
        }
      </div>

      <div id="programmatic-value" class="example-section">
        <h3 class="example-title">Programmatic Value Setting</h3>
        <p>Set the datepicker value programmatically, useful when data comes from a server-side API.</p>
        
        <div class="example-controls">
          @for (action of programmaticActions; track action.label) {
            <button class="demo-button" (click)="action.action()">{{ action.label }}</button>
          }
        </div>

        <div class="example-demo">
          <ngxsmk-datepicker
            mode="single"
            [value]="programmaticSingleDate"
            [theme]="currentTheme"
            placeholder="Single date picker"
            (valueChange)="onProgrammaticValueChange($event)">
          </ngxsmk-datepicker>

          <div style="height: 1rem;"></div>

          <ngxsmk-datepicker
            mode="range"
            [value]="programmaticRange"
            [theme]="currentTheme"
            placeholder="Range picker"
            (valueChange)="onProgrammaticRangeChange($event)">
          </ngxsmk-datepicker>

          <div style="height: 1rem;"></div>

          <ngxsmk-datepicker
            mode="multiple"
            [value]="programmaticMultipleDates"
            [theme]="currentTheme"
            placeholder="Multiple dates picker"
            (valueChange)="onProgrammaticMultipleChange($event)">
          </ngxsmk-datepicker>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">typescript</span>
            <button class="code-copy" (click)="copyCode(programmaticCode)">Copy</button>
          </div>
          <pre><code [innerHTML]="programmaticCode | code"></code></pre>
        </div>

        <div class="result-box">
          <strong>Current Value:</strong> 
          @if (programmaticSingleDate) {
            <code>{{ programmaticSingleDate | date:'medium' }}</code>
          } @else {
            <code>Not set</code>
          }
        </div>

        <div class="result-box">
          <strong>Current Range:</strong> 
          @if (programmaticRange) {
            <code>{{ programmaticRange.start | date:'medium' }} - {{ programmaticRange.end | date:'medium' }}</code>
          } @else {
            <code>Not set</code>
          }
        </div>

        <div class="result-box">
          <strong>Current Multiple:</strong> 
          @if (programmaticMultipleDates?.length) {
            <code>{{ programmaticMultipleDates | json }}</code>
          } @else {
            <code>Not set</code>
          }
        </div>
      </div>

      <div id="inline-calendar" class="example-section">
        <h3 class="example-title">Inline Calendar</h3>
        <p>Calendar always visible with inline mode.</p>
        
        <div class="example-demo">
          <ngxsmk-datepicker
            mode="range"
            [inline]="true"
            [theme]="currentTheme"
            formControlName="inlineRange">
          </ngxsmk-datepicker>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">html</span>
            <button class="code-copy" (click)="copyCode(inlineCode)">Copy</button>
          </div>
          <pre><code [innerHTML]="inlineCode | code"></code></pre>
        </div>
      </div>

      <div id="min-max-date" class="example-section">
        <h3 class="example-title">With Min/Max Date</h3>
        <p>Restrict date selection with min and max date constraints.</p>
        
        <div class="example-demo">
          <ngxsmk-datepicker
            mode="single"
            [minDate]="minDate"
            [maxDate]="maxDate"
            [theme]="currentTheme"
            placeholder="Select a date"
            formControlName="singleDate2">
          </ngxsmk-datepicker>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">html</span>
            <button class="code-copy" (click)="copyCode(minMaxCode)">Copy</button>
          </div>
          <pre><code [innerHTML]="minMaxCode | code"></code></pre>
        </div>
      </div>
      </form>

      <div id="mobile-playground" class="example-section">
        <h3 class="example-title">Mobile Screen Playground</h3>
        <p>Test the datepicker across different mobile screen sizes. Use the buttons below to simulate various device widths and see how the datepicker adapts responsively.</p>
        
        <div class="mobile-size-selector">
          @for (size of mobileSizes; track size.label) {
          <button 
            class="size-button"
            [class.active]="selectedMobileSize === size.width"
            (click)="selectMobileSize(size.width)">
            {{ size.label }}
            <span class="size-dimension">({{ size.width }}px)</span>
          </button>
          }
        </div>

        <div class="mobile-preview-container" [style.width.px]="getPreviewWidth()">
          <div class="mobile-preview-frame">
            <div class="mobile-preview-header">
              <div class="mobile-preview-status-bar">
                <span class="mobile-time">{{ currentTime }}</span>
                <div class="mobile-signal-icons">
                  <span>üì∂</span>
                  <span>üì∂</span>
                  <span>üîã</span>
                </div>
              </div>
            </div>
            <div class="mobile-preview-content">
              <ngxsmk-datepicker
                mode="range"
                [inline]="true"
                [theme]="currentTheme">
              </ngxsmk-datepicker>
            </div>
          </div>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">html</span>
            <button class="code-copy" (click)="copyCode(mobilePlaygroundCode)">Copy</button>
          </div>
          <pre><code [innerHTML]="mobilePlaygroundCode | code"></code></pre>
        </div>
      </div>
    </section>
  </main>

  <!-- TokiForge Promotion Sidebar - Right Side -->
  <aside class="tokiforge-promotion">
    <div class="promotion-content">
      <div class="promotion-icon">üé®</div>
      <div class="promotion-text">
        <h4>Powered by TokiForge</h4>
        <p>Modern design token & theme engine for Angular, React, Vue, Svelte, and more</p>
      </div>
      <a href="https://tokiforge.github.io/tokiforge/" target="_blank" class="promotion-button" aria-label="Visit TokiForge website">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
          <polyline points="15 3 21 3 21 9"></polyline>
          <line x1="10" y1="14" x2="21" y2="3"></line>
        </svg>
        <span>Visit</span>
      </a>
    </div>
  </aside>
</div>

